---
title: 画一手好的架构图是码农进阶的开始（转载）
date: 2023-09-28 14:24:55
description: 系统架构说明，各类型架构图
tags:
- 架构设计
- 流程图
categories:
- 架构设计
- 流程图
---

# 1.前言

你是否对大厂展示的五花八门，花花绿绿的架构设计图所深深吸引，当我们想用几张图来介绍下业务系统，是不是对着画布不知从何下手？作为技术扛把子的筒子们是不是需要一张图来描述系统，让系统各个参与方都能看的明白？如果有这样的困惑，本文将介绍一些画图的方法论，让技术图纸更加清晰。

# 2. 架构的定义

- 系统架构是概念的体现，是对物/信息的功能与形式元素之间的对应情况所做的分配，是对元素之间的关系以及元素同周边环境之间的关系所做的定义;
- 架构就是对系统中的实体以及实体之间的关系所进行的抽象描述，是一系列的决策;
- 架构是结构和愿景.

  在TOGAF企业架构理论中， 架构是从公司战略层面，自顶向下的细化的一部分，从战略=> 业务架构=>
  应用/数据/技术架构，当然老板层关注的是战略与业务架构，我们搬砖的需要聚焦到应用/数据/技术架构这一层。
  ![图片1](/images/1.png)
- 业务架构: 由业务架构师负责，也可以称为业务领域专家、行业专家，业务架构属于顶层设计，其对业务的定义和划分会影响组织架构和技术架构;
- 应用架构:
  由应用架构师负责，需要根据业务场景需要，设计应用的层次结构，制定应用规范、定义接口和数据交互协议等。并尽量将应用的复杂度控制在一个可以接受的水平，从而在快速的支撑业务发展的同时，在保证系统的可用性和可维护性的同时，确保应用满足非功能属性的要求如性能、安全、稳定性等。
  -技术架构: 描述了需要哪些服务；选择哪些技术组件来实现技术服务；技术服务以及组件之间的交互关系;
  -数据架构: 描述了数据模型、分布、数据的流向、数据的生命周期、数据的管理等关系;

# 3.架构图的分类

系统架构图是为了抽象的表示软件系统的整体轮廓和各个组件之间的相互关系和约束边界，以及软件系统的物理部署和软件系统的演进方向的整体视图。好的架构图可以让干系人理解、遵循架构决策，就需要把架构信息传递出去。那么，画架构图是为了：解决沟通障碍/达成共识/减少歧义。比较流行的是4+1视图和C4视图。

## 3.1 4+1视图

### 3.1.1 场景视图

用于描述系统的参与者与功能用例间的关系,反映系统的最终需求和交互设计，通常由用例图表示;
![图片2](/images/2.png)

### 3.1.2 逻辑视图

用于描述系统软件功能拆解后的组件关系，组件约束和边界，反映系统整体组成与系统如何构建的过程，通常由UML的组件图和类图来表示。
![图片3](/images/3.png)

### 3.1.3 物理视图

用于描述系统软件到物理硬件的映射关系,反映出系统的组件是如何部署到一组可计算机器节点上，用于指导软件系统的部署实施过程。
![图片4](/images/4.png)

### 3.1.4 处理流程视图

用于描述系统软件组件之间的通信时序,数据的输入输出,反映系统的功能流程与数据流程,通常由时序图和流程图表示。
![图片5](/images/5.png)

### 3.1.5 开发视图

开发视图用于描述系统的模块划分和组成,以及细化到内部包的组成设计,服务于开发人员,反映系统开发实施过程。
![图片6](/images/6.png)

<h4>5 种架构视图从不同角度表示一个软件系统的不同特征，组合到一起作为架构蓝图描述系统架构。</h4>

### 3.2 C4视图

下面的案例来自C4官网，然后加上了一些笔者的理解。
![图片7](/images/7.png)

C4 模型使用容器（应用程序、数据存储、微服务等）、组件和代码来描述一个软件系统的静态结构。这几种图比较容易画，也给出了画图要点，但最关键的是，我们认为，它明确指出了每种图可能的受众以及意义。

### 3.2.1 语境图(System Context Diagram)

用于描述要我们要构建的系统是什么，用户是谁，需要如何融入已有的IT环境。这个图的受众可以是开发团队的内部人员、外部的技术或非技术人员。
![图片8](/images/8.png)

### 3.2.2 容器图(Container Diagram)

容器图是把语境图里待建设的系统做了一个展开描述，主要受众是团队内部或外部的开发人员或运维人员，主要用来描述软件系统的整体形态，体现了高层次的技术决策与选型，系统中的职责是如何分布的，容器间是如何交互的。

![图片9](/images/9.png)

### 3.2.3 组件图(Component Diagram)

组件图是把某个容器进行展开，描述其内部的模块，主要是给内部开发人员看的，怎么去做代码的组织和构建，描述了系统由哪些组件/服务组成，了组件之间的关系和依赖，为软件开发如何分解交付提供了框架。
![图片10](/images/10.png)

# 4.怎么画好架构图

上面的分类是前人的经验总结，图也是从网上摘来的，那么这些图画的好不好呢？是不是我们要依葫芦画瓢去画这样一些图？先不去管这些图好不好，我们通过对这些图的分类以及作用，思考了一下，总结下来，我们认为，明确这两点之后，从受众角度来说，一个好的架构图是不需要解释的，它应该是自描述的，并且要具备一致性和足够的准确性，能够与代码相呼应。

## 4.1 视图的受众

在画出一个好的架构图之前， 首先应该要明确其受众，再想清楚要给他们传递什么信息
，所以，不要为了画一个物理视图去画物理视图，为了画一个逻辑视图去画逻辑视图，而应该根据受众的不同，传递的信息的不同，用图准确地表达出来，最后的图可能就是在这样一些分类里。那么，画出的图好不好的一个直接标准就是：受众有没有准确接收到想传递的信息。

## 4.2 视图的元素区分

可以看到架构视图是由方框和线条等元素构成，要利用形状、颜色、线条变化等区分元素的含义，避免混淆。架构是一项复杂的工作，只使用单个图表来表示架构很容易造成莫名其妙的语义混乱。

# 让我们一起画出好的架构图！

# 参考资料

- c4model.com/
- 《程序员必读之软件架构》
- 为什么需要软件架构图

作者：代码的色彩
链接：https://juejin.cn/post/7062662600437268493
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
